<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <title>Our Ghibli Story | Will You Marry Me?</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />

  <!-- (선택) 구글 폰트 적용 -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link 
    href="https://fonts.googleapis.com/css2?family=Dancing+Script:wght@500;700&family=Noto+Serif+KR:wght@400;700&display=swap" 
    rel="stylesheet"
  >

  <style>
    /* =========================
       공통 초기화
    ========================== */
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }
    html, body {
      height: 100%;
      line-height: 1.6;
      /* 지브리 감성의 은은한 파스텔 그라데이션 */
      background: linear-gradient(to bottom right, #e8f3e5, #f9ece6);
      overflow: hidden; /* 슬라이드 전환 시 스크롤 숨김 */
    }

    /* =========================
       폰트
    ========================== */
    body {
      font-family: 'Noto Serif KR', serif; 
      display: flex;
      justify-content: center;
      align-items: center;
      color: #333;
    }

    /* =========================
       컨테이너(슬라이드 전체 영역)
    ========================== */
    .container {
      position: relative;
      width: 100%;
      max-width: 600px;
      height: 90vh;
      margin: auto;
      background: #fff9f2; 
      border-radius: 12px;
      box-shadow: 0 8px 16px rgba(0,0,0,0.2);
      overflow: hidden;
      display: flex;
      flex-direction: column;
      border: 2px solid rgba(0,0,0,0.1);
    }

    /* =========================
       씬(슬라이드) 기본 스타일
    ========================== */
    .scene {
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      padding: 2rem 1.5rem;
      display: flex;
      flex-direction: column;
      align-items: center;
      text-align: center;
      justify-content: center;
      opacity: 0;
      transition: opacity 1s ease;
    }
    .scene.active {
      opacity: 1;
      z-index: 1;
    }

    /* =========================
       페이드 인 애니메이션
    ========================== */
    .fade-in {
      animation: fadeInUp 1s forwards;
    }
    @keyframes fadeInUp {
      0% {
        opacity: 0;
        transform: translateY(30px);
      }
      100% {
        opacity: 1;
        transform: translateY(0);
      }
    }

    /* =========================
       씬 내 이미지
    ========================== */
    .scene img {
      max-width: 70%;
      height: auto;
      margin-bottom: 1rem;
      border-radius: 8px;
      box-shadow: 0 4px 10px rgba(0, 0, 0, 0.2);
    }

    /* =========================
       텍스트 스타일
    ========================== */
    h1, h2 {
      margin-bottom: 1rem;
      font-family: 'Dancing Script', cursive, 'Noto Serif KR', serif;
      color: #4f2817;
    }
    p {
      margin-bottom: 1rem;
      line-height: 1.5;
      font-size: 1rem;
      font-weight: 400;
    }

    /* =========================
       버튼 스타일
    ========================== */
    .btn {
      cursor: pointer;
      padding: 0.8rem 1.2rem;
      margin: 0.5rem;
      border: none;
      border-radius: 4px;
      background: #d8b4a0;
      color: #fff;
      font-size: 1rem;
      transition: background 0.3s, transform 0.3s;
    }
    .btn:hover {
      background: #c8987e;
      transform: translateY(-2px);
    }

    /* YES/NO 버튼 */
    .yes-btn {
      background: #b86e6e;
    }
    .yes-btn:hover {
      background: #a85f5f;
      transform: translateY(-2px) scale(1.05);
    }
    .no-btn {
      background: #7d7d7d;
    }
    .no-btn:hover {
      background: #5d5d5d;
      transform: translateY(-2px) scale(1.05);
    }

    /* =========================
       반응형
    ========================== */
    @media (max-width: 480px) {
      .container {
        height: 95vh; 
      }
      h1 {
        font-size: 1.6rem;
      }
      p {
        font-size: 0.95rem;
      }
      .btn {
        font-size: 0.9rem;
        padding: 0.6rem 0.8rem;
      }
    }
  </style>
</head>
<body>
  <div class="container">
    <!-- ========== 씬 1: 인트로 ========== -->
    <div class="scene active" id="scene1">
      <img src="images/memory1.jpg" alt="우리의 추억 사진" class="fade-in" />
      <h1 class="fade-in" style="animation-delay:0.2s;">우리의 지브리 감성 이야기</h1>
      <p class="fade-in" style="animation-delay:0.4s;">
        우리, 처음 만났을 때가 기억나?<br />
        어색했던 그 순간이 이제 한 편의 애니메이션 같은 추억이 되었어.
      </p>
      <button class="btn fade-in" style="animation-delay:0.6s;" onclick="nextScene(2)">
        다음으로
      </button>
    </div>

    <!-- ========== 씬 2: 추억 회상 ========== -->
    <div class="scene" id="scene2">
      <img src="images/memory2.jpg" alt="함께한 순간들" class="fade-in" />
      <h2 class="fade-in" style="animation-delay:0.2s;">함께한 순간들</h2>
      <p class="fade-in" style="animation-delay:0.4s;">
        숲 속을 함께 거니는 토토로처럼,<br />
        언제나 내게 편안한 휴식이 되어준 너.<br />
        우리의 모든 시간은 지브리 영화 속 장면 같아.
      </p>
      <button class="btn fade-in" style="animation-delay:0.6s;" onclick="nextScene(3)">
        더 알고 싶어!
      </button>
    </div>

    <!-- ========== 씬 3: 프로포즈 ========== -->
    <div class="scene" id="scene3">
      <img src="images/proposal.jpg" alt="프러포즈" class="fade-in" />
      <h2 class="fade-in" style="animation-delay:0.2s;">Will You Marry Me?</h2>
      <p class="fade-in" style="animation-delay:0.4s;">
        이렇게 많은 추억을 함께 만들어왔는데,<br />
        앞으로의 인생도 함께 써나가면 안 될까?<br />
        나와 결혼해줄래?
      </p>
      <div class="fade-in" style="animation-delay:0.6s;">
        <button class="btn yes-btn" onclick="showFinal(true)">YES</button>
        <button class="btn no-btn" id="noBtn">NO</button>
      </div>
    </div>

    <!-- ========== 씬 4: 최종 메시지 ========== -->
    <div class="scene" id="scene4">
      <h2 id="finalText" class="fade-in"></h2>
      <p class="fade-in" style="animation-delay:0.2s;">
        함께 걸어갈 더 많은 추억,<br />
        우리 둘만의 새로운 이야기를 써 내려가자.<br />
        사랑해.
      </p>
    </div>
  </div>

  <!-- ===============================
       BGM (무료 음원) 삽입
       - muted 상태로 자동재생(loop)
       - 모바일 브라우저 정책을 고려
       - 클릭 시 음소거 해제 가능
  ================================ -->
  <audio
    id="bgmAudio"
    src="https://cdn.pixabay.com/download/audio/2023/06/20/audio_695f63a72f.mp3?filename=a_peaceful_path-147436.mp3"
    autoplay
    loop
    muted
    style="display:none;"
  >
    브라우저가 audio 태그를 지원하지 않습니다.
  </audio>

  <script>
    /**
     * 씬(페이지) 이동 함수
     */
    function nextScene(nextId) {
      const currentScene = document.querySelector('.scene.active');
      if (currentScene) currentScene.classList.remove('active');

      const nextScene = document.getElementById(`scene${nextId}`);
      if (nextScene) nextScene.classList.add('active');
    }

    /**
     * YES/NO 버튼 클릭 시 최종 처리
     */
    function showFinal(isYes) {
      // 현재 씬(3) 비활성화
      const scene3 = document.getElementById('scene3');
      scene3.classList.remove('active');

      // 다음 씬(4) 활성화
      const scene4 = document.getElementById('scene4');
      scene4.classList.add('active');

      // 음소거 해제 (사용자가 YES/NO 클릭했으므로 정책상 재생 가능)
      const bgmAudio = document.getElementById('bgmAudio');
      bgmAudio.muted = false;

      const finalText = document.getElementById('finalText');
      if (isYes) {
        finalText.textContent = "당신과 평생을 함께하고 싶어! 고마워!";
      } else {
        finalText.textContent = "거절은 안 돼! (농담이야, 그래도 널 놓칠 수 없어!)";
      }
    }

    /**
     * NO 버튼 도망가기 (마우스오버 이벤트)
     */
    const noBtn = document.getElementById('noBtn');
    noBtn.addEventListener('mouseover', () => {
      const randomX = Math.random() * 300 - 150; 
      const randomY = Math.random() * 300 - 150;
      noBtn.style.transform = `translate(${randomX}px, ${randomY}px)`;
    });
  </script>
</body>
</html>
